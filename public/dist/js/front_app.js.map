{"version":3,"sources":["custom_autocomplete.js","seeMoreFilters.js","c.js","a.js","login.js","register.js","password.js","change_email.js","change_password.js","activation.js","front.js","filters.js","productModal.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"front_app.js","sourcesContent":["(function ( $ ) {\n\n    $.fn.searchWidget = function( options ) {\n\n        var that = this;\n        var current_term = '';\n        var runningRequest = null;\n        var resultsPlaceholder = null;\n        var moreResults = null;\n        var settings = $.extend({\n\n        }, options );\n\n        return this.on('keyup', function(){\n            if ($(this).val() && $(this).val() != current_term){\n\n                current_term = $(this).val();\n\n                if (runningRequest){\n                    runningRequest.abort();\n                }\n\n                var url = settings.url($(this).val());\n\n                runningRequest = $.get(url)\n                    .success(function(res){\n\n                        if (settings.resultsPlaceholder && !resultsPlaceholder ){\n\n                            resultsPlaceholder = $(settings.resultsPlaceholder);\n\n                        }\n\n                        if (resultsPlaceholder){\n\n                            $(resultsPlaceholder.empty());\n                            \n                            if (resultsPlaceholder.attr('data-autoshow')){\n                                resultsPlaceholder.show();\n                            }\n\n                            if (res.length > 0){\n                                $.each(res, function(){\n                                    $(resultsPlaceholder).append(settings.resultTemplate(this));\n                                });\n                                moreResults = $(options.moreResultsMessage);\n\n                            } else {\n                                if (current_term){\n                                    $(resultsPlaceholder).append(settings.noResultErrorMessage);\n                                }\n                            }\n                        }\n                    })\n                    .fail(function(){\n\n                    });\n            }\n        });\n    };\n\n}( jQuery ));","(function(){\n    $.fn.seeMoreFilters = function(options){\n\n        return $(this).each(function(){\n\n            var that = this;\n\n            var itemCount = $(that).find('li').length;\n\n            var initial = parseInt(options.initial);\n\n            var moreElementTemplate = '<li><a href=\"#\" class=\"filter-list-more-link\">' + options.moreLabel + '</li>';\n\n            var expand = function(){\n\n            };\n\n            var init = function(){\n\n                //initially hide the extra elements\n\n                var expand = options.expand !== undefined ? options.expand : false;\n\n                if (initial < itemCount && !expand){\n                    $(that).find('li').slice(parseInt(options.initial), itemCount).hide();\n                    $(that).append(moreElementTemplate)\n\n                    $(that).on('click', '.filter-list-more-link', function(e){\n                        e.preventDefault();\n\n                        $(that).find('li').slice(parseInt(options.initial), itemCount).fadeIn('fast');\n\n                        $(this).parent().hide();\n\n                    });\n                }\n            };\n\n            init();\n\n        });\n\n    }\n})(jQuery);","$(function(){\n\n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN' : $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n\n    $(document).ajaxError(function(event, request, settings){\n        switch(request.status){\n            case 401:\n\n                $('#login-required-modal').modal({\n                    backdrop: 'static',\n                    keyboard: true,\n                    show: true\n                });\n\n                break;\n        }\n    });\n\n    $(\".nav .dropdown-toggle\").click(function () {\n        window.location = this.href;\n    });\n\n    $('input[type=checkbox], input[type=radio]').each(function(){\n        if ($(this).hasClass('small-icheck')){\n\n        } else {\n            $(this).iCheck({\n                checkboxClass: 'icheckbox_square-blue',\n                radioClass: 'iradio_square-blue',\n                increaseArea: '0'\n            });\n        }\n    });\n\n    //async load of images for the product tiles\n\n    var handleVisibilityChange = function(){\n        $('.product-tile .image-async-loader').each(function(){\n            if ($(this).parent().parent().visible(true, true)){\n\n                var src = $(this).attr('data-src');\n                var alt = $(this).attr('data-alt');\n\n                var parent = $(this).closest('.product-image');\n\n                //$(this).closest('.product-image').addClass('no-back');\n                $(this).replaceWith('<img src=\"' + src + '\" alt=\"' + alt + '\"/>');\n\n                $(parent).find('img').one(\"load\", function() {\n                    parent.addClass('no-back');\n                }).each(function() {\n                    if(this.complete) $(this).load();\n                });\n            }\n        });\n    };\n\n    $(document).on('scroll', function(){\n        handleVisibilityChange();\n    });\n\n    $(document).on('resize', function(){\n        handleVisibilityChange();\n    });\n\n    handleVisibilityChange();\n\n    // animation added to the product tile hover overlay\n    // $(document).on('mouseenter', '.product-tile .overlay a', function(){\n    //     if (!$(this).closest('.product-tile').hasClass('wishlist-tile')){\n    //         $(this).addClass('animated infinite pulse');\n    //     }\n    // });\n    //\n    // $(document).on('mouseleave', '.product-tile .overlay a', function(){\n    //     if (!$(this).closest('.product-tile').hasClass('wishlist-tile')){\n    //         $(this).removeClass('animated infinite pulse');\n    //     }\n    // });\n\n    var handleClickOnSimilarProduct = function(elem){\n        $(elem).find('form').submit();\n    };\n\n    $(document).on('click', '.product-tile a', function(e){\n        e.stopPropagation();\n        e.preventDefault();\n        if (!$(this).is('.wishlist')){\n            if ($('.similar-products').has($(this)).length == 0){\n                $(this).closest('.product-tile-wrapper').productModal();\n            } else {\n                handleClickOnSimilarProduct($(this).closest('.product-tile-wrapper'));\n            }\n\n        }\n    });\n\n    $(document).on('click', '.product-tile', function(){\n        if ($('.similar-products').has($(this)).length == 0){\n            $(this).closest('.product-tile-wrapper').productModal();\n        } else {\n            handleClickOnSimilarProduct($(this).closest('.product-tile-wrapper'));\n        }\n    });\n\n    var updateIfInModal = function(elem, status){\n        if (elem.closest('.product-modal').size() > 0){\n            // find the product tile wrapper\n\n            var wrapper = $('.product-tile-wrapper.active').first();\n\n            if (wrapper){\n\n                var button = wrapper.find('.wishlist').first();\n\n                console.log(button);\n\n                if (status == true){\n                    button.removeClass('prim-btn');\n                    button.addClass('on-wishlist def-btn');\n                    wrapper.attr('data-on-wishlist', 'true')\n                } else {\n                    button.removeClass('on-wishlist');\n                    button.removeClass('def-btn');\n                    button.addClass('prim-btn');\n                    wrapper.attr('data-on-wishlist', 'false')\n                }\n\n            }\n\n        }\n    };\n\n\n    //wishlist behaviour\n    $(document).on('click', '.wishlist', function(e){\n        e.preventDefault();\n        e.stopPropagation();\n        var that = this;\n        $.post($(this).attr('data-url'), {p: $(this).attr('data-pi')})\n            .success(function(res){\n                if (res.message == 'added'){\n                    $(that).removeClass('prim-btn');\n                    $(that).addClass('on-wishlist def-btn');\n                    updateIfInModal($(that), true);\n                } else {\n                    $(that).removeClass('on-wishlist');\n                    $(that).removeClass('def-btn');\n                    $(that).addClass('prim-btn');\n                    updateIfInModal($(that), false);\n                }\n\n                if ($(that).hasClass('remove_on_toggled')){\n                    $(that).closest('.product-tile-wrapper').remove();\n\n                    //search for products on wishlist if in profile page to show\n                    // the no products message after last product removal\n                    if ($('.profile-wishlist-wrapper').size() > 0){\n                        if ($('.profile-wishlist-wrapper .product-tile-wrapper').size() == '0'){\n                            $('.profile-wishlist-wrapper').find('p').show();\n                        }\n                    }\n\n                }\n            })\n            .error(function(data, textStatus, errorThrown){\n            });\n    });\n\n    //global alert showing\n    $('.sysalert').each(function(){\n        //bootbox.alert($(this).text());\n\n        var that = this;\n\n        if ($(this).attr('data-type') == 'success'){\n            bootbox.dialog({\n                message: $(that).text(),\n                title: \"Aviso\",\n                buttons: {\n                    success: {\n                        label: \"OK\",\n                        className: \"btn-success\",\n                        callback: function() {\n\n                        }\n                    }\n                }\n            });\n            return;\n        }\n\n        if ($(this).attr('data-type') == 'error'){\n            bootbox.dialog({\n                message: $(that).text(),\n                title: \"Upps. Se ha producido un error\",\n                buttons: {\n                    success: {\n                        label: \"OK\",\n                        className: \"btn-danger\",\n                        callback: function() {\n\n                        }\n                    }\n                }\n            });\n            return;\n        }\n\n    });\n\n    if ($(window).height() > $('body').height()){\n        $('#main-footer').addClass('fixed');\n    }\n\n    $('.sns').each(function(){\n        $(this).snsShare($(this).attr('data-sns-title'), $(this).attr('data-sns-url'));\n    });\n\n    $('.see-more-filter-list').each(function(){\n        $(this).seeMoreFilters({\n            initial: 4,\n            moreLabel: '+ Ver más'\n        })\n    });\n});","$('#offcanvas-search-widget').searchWidget({\n    url: function(term){\n        var url = $('#offcanvas-search-widget').attr('data-url');\n        return url.replace('the_term', term);\n    },\n    resultsPlaceholder: '.sidebar-results',\n    noResultErrorMessage: '<p class=\"text-center\">Lo sentimos, no podemos encontrar resultados para el criterio</p>',\n    moreResultsMessage: '<div class=\"results-footer\"><a href=\"#\">Mostrar más resultados</a></div>',\n    resultTemplate: function(res){\n        return '<p><a href=\"' + res.url + '\">' + res.rec_name + '</a></p>';\n    }\n});\n\n$('#custom-menu-search-widget').searchWidget({\n    url: function(term){\n        var url = $('#custom-menu-search-widget').attr('data-url');\n        return url.replace('the_term', term);\n    },\n    resultsPlaceholder: '.menu-search-results',\n    noResultErrorMessage: '<p class=\"text-center\">Lo sentimos, no podemos encontrar resultados para el criterio</p>',\n    moreResultsMessage: '<div class=\"results-footer text-center\"><a href=\"more_url\">Mostrar más resultados</a></div>',\n    resultTemplate: function(res){\n        return '<a href=\"' + res.url + '\" class=\"result\">' +\n            '<div class=\"result-img\">' +\n                '<img src=\"' + res.thumb + '\" alt=\"' + res.rec_name + '\" width=\"50\" height=\"50\" alt=\"' + res.rec_name + '\" />' +\n            '</div>' +\n            '<div class=\"result-link\">' +\n                res.rec_name +\n            '</div>' +\n        '</a>';\n    }\n});\n\n$(document).on('keyup', '#custom-menu-search-widget', function(){\n    if ($(this).val()){\n        $('.search-close-btn').show();\n    } else {\n        $('.search-close-btn').hide();\n        $('.menu-search-results').hide();\n    }\n});\n$(document).on('click', '.search-close-btn', function(e){\n    e.preventDefault();\n    $('#custom-menu-search-widget').val('');\n    $('#custom-menu-search-widget').focus();\n    $('.menu-search-results').hide();\n});\n\n$(document).mouseup(function (e)\n{\n    var container = $('.menu-search-results');\n\n    if (!container.is(e.target) // if the target of the click isn't the container...\n        && container.has(e.target).length === 0) // ... nor a descendant of the container\n    {\n        container.hide();\n    }\n});","$(function(){\n    $('#login-form').validate({\n        rules: {\n            email: {\n                email: true,\n                required: true\n            },\n            password: {\n                required: true\n            }\n        }\n    });\n});\n","$(function(){\n    $('#register-form').validate({\n        ignore: '',\n        rules: {\n            name: 'required',\n            email: {\n                required: true,\n                email: true,\n                remote: $('input[name=email]').attr('data-remote-checker')\n            },\n            password: {\n                required: true\n            },\n            password_confirmation: {\n                required: true,\n                equalTo: 'input[name=password]'\n            },\n            gender: {\n                required: true\n            }\n        },\n        messages: {\n            email: {\n                remote: 'Ya existe una cuenta en nuestro sitio registrada con esa dirección'\n            },\n            password_confirmation: {\n                equalTo: 'Las contraseñas deben coincidir'\n            }\n        },\n        errorPlacement: function(error, element){\n            if ($(element).is('input:checkbox') || $(element).is('input:radio')){\n                error.appendTo(element.closest('.form-group'));\n            } else {\n                error.appendTo(element.parent());\n            }\n        }\n    });\n});\n","$(function(){\n    $('#password-form').validate({\n        rules: {\n            email: {\n                required: true,\n                email: true\n            }\n        }\n    });\n});","$(function(){\n    $('#change-email').validate({\n        rules: {\n            new_email: {\n                required: true,\n                email: true\n            },\n            new_email_conf: {\n                required: true,\n                equalTo: 'input[name=new_email]'\n            }\n        },\n        messages: {\n            new_email: {\n                required: 'Este campo es obligatorio',\n                email: 'Debe escribir un email válido',\n            },\n            new_email_conf: {\n                required: 'Este campo es obligatorio',\n                email: 'Debe escribir un email válido',\n                equalTo: 'Las direcciones deben coincidir'\n            }\n        }\n    });\n});","$(function () {\n    $('#change-password-form').validate({\n        rules: {\n            new_password: {\n                required: true,\n                minlength: 6\n            },\n            new_password_conf: {\n                required: true,\n                equalTo: 'input[name=new_password]'\n            }\n        },\n        messages: {\n            new_password: {\n                required: 'Este campo es obligatorio',\n                minlength: 'La contraseña debe tener al menos 6 caracteres'\n            },\n            new_password_conf: {\n                required: 'Este campo es obligatorio',\n                equalTo: 'Las contraseñas deben coincidir'\n            }\n        }\n    });\n});","$(function(){\n\n    var currentRequest = null;\n\n    $(document).on('click', '#a', function(e){\n        e.preventDefault();\n\n        var that = this;\n        var currentText = $(this).text();\n\n        if (currentRequest)\n            currentRequest.abort();\n\n        $(this).text($(this).attr('data-loading'));\n\n        currentRequest = $.post($(this).attr('data-url'), {'key': $(this).attr('data-token')})\n            .success(function(res){\n\n                var message = '';\n\n                if (res.message != undefined){\n                    message = res.message;\n                } else {\n                    message = 'Se ha producido un error al enviar el mail de activación. Nuestros administradores han sido notificados del mismo. Inténtelo nuevamente.'\n                }\n\n                bootbox.dialog({\n                    message: message,\n                    title: \"Email enviado\",\n                    buttons: {\n                        success: {\n                            label: \"OK\",\n                            className: res.status == 'success' ? \"btn-success\" : 'btn-danger',\n                        }\n                    }\n                });\n            })\n            .error(function(){\n                bootbox.dialog({\n                    message: 'Se ha producido un error al enviar el mail de activación. Nuestros administradores han sido notificados del mismo. Inténtelo nuevamente.',\n                    title: \"Upps. Se ha producido un error\",\n                    buttons: {\n                        success: {\n                            label: \"OK\",\n                            className: \"btn-danger\",\n                        }\n                    }\n                });\n            })\n            .done(function(){\n                currentRequest = null;\n                $(that).text(currentText);\n            });\n    });\n});","$(function(){\n    $(\"#my-menu\").mmenu({\n        extensions: [\"pageshadow\", \"pagedim-black\"],\n        navbar: {\n            title: 'Entrenamiento.com'\n        }\n    });\n\n    $(\"#my-menu2\").mmenu({\n        offCanvas: {\n            position: 'right',\n        },\n        extensions: [\"pageshadow\", \"pagedim-black\"],\n        navbar: {\n            title: 'Buscar en el sitio'\n        }\n    });\n\n    $(document).on('click', '.toggle-menu', function(e){\n        e.preventDefault();\n        var menuApi = $('#my-menu').data('mmenu');\n        menuApi.open();\n    });\n\n    $(document).on('click', '.toggle-menu2', function(e){\n        e.preventDefault();\n        var menuApi = $('#my-menu2').data('mmenu');\n        menuApi.open();\n    });\n\n\n    //custom menu handling\n    $('a[data-popover]').each(function(){\n\n        var content = '<ul>' + $(this).next('ul').first().html() + '</ul>';\n\n        $(this).webuiPopover({\n            content: content,\n            trigger: 'hover',\n            animation: 'fade',\n            // arrow: false,\n            position: 'bottom',\n            // offsetTop: 4,\n            template: '<div class=\"webui-popover navigation-popover\">' +\n            '<div class=\"arrow\"></div>' +\n            '<div class=\"webui-popover-inner\">' +\n            '<a href=\"#\" class=\"close\">&times;</a>' +\n            '<h3 class=\"webui-popover-title\"></h3>' +\n            '<div class=\"webui-popover-content\"><i class=\"icon-refresh\"></i> <p>&nbsp;</p></div>' +\n            '</div>' +\n            '</div>',\n        });\n    });\n    //\n    // $('.navlist-wrapper').scrollableNav({\n    //     elem: '.navlist'\n    // });\n\n});","(function($){\n\n    var active_tags = [];\n\n    var currentFilters = {};\n\n    var addFieldToUrl = function(varName, varValue, appendValue){\n\n        if (undefined !== varName && undefined !== varValue){\n            if (undefined !== currentFilters[varName]){\n                if (typeof currentFilters[varName] == 'object' && currentFilters[varName].indexOf(varValue) == -1 && varName !== 'price' && appendValue == true ){\n                    currentFilters[varName].push(varValue);\n                } else {\n                    if (currentFilters[varName] !== varValue){\n                        if (varName !== 'price' && appendValue == true){\n                            var currentValue = currentFilters[varName];\n                            currentFilters[varName] = [];\n                            currentFilters[varName].push(currentValue);\n                            currentFilters[varName].push(varValue);\n                        } else {\n                            currentFilters[varName] = varValue;\n                        }\n                    }\n                }\n\n            } else {\n                currentFilters[varName] = varValue;\n            }\n        }\n\n        console.log(currentFilters);\n\n    };\n\n    var buildUrl = function(filter, varName, varValue, appendValue){\n\n        if (appendValue !== false){\n            appendValue = true;\n        }\n\n        addFieldToUrl(varName, varValue, appendValue);\n\n        var url_base = window.location.origin + window.location.pathname;\n\n        var url_components = [];\n\n        for(var i in currentFilters){\n            if (typeof currentFilters[i] == 'object'){\n                for(var j in currentFilters[i]){\n                    url_components.push(i + '=' + encodeURIComponent(currentFilters[i][j]));\n                }\n            } else {\n                url_components.push(i + '=' + encodeURIComponent(currentFilters[i]));\n            }\n        }\n\n        var query_string = '?' + url_components.join('&');\n\n        window.location.href = url_base + (query_string != '?' ? query_string : '');\n    };\n\n    var removeUrlParam = function(label, value){\n        if (undefined !== currentFilters[label]){\n            if (typeof currentFilters[label] == 'object'){\n                var index = currentFilters[label].indexOf(value);\n\n                if (index !== -1){\n                    currentFilters[label].splice(index, 1);\n                    buildUrl();\n                }\n            } else {\n                currentFilters[label] = null;\n                buildUrl();\n            }\n        }\n    };\n\n    var parseQueryString = function(){\n\n        var queryString = decodeURIComponent(window.location.search);\n\n        if (queryString[0] == '?'){\n            queryString = queryString.substr(1);\n        }\n\n        var pairs = queryString.split('&');\n\n        for (var i in pairs){\n            if (pairs[i]){\n                if (pairs[i].indexOf('=')){\n                    var sub_pair = pairs[i].split('=');\n\n                    if (undefined !== sub_pair[0] && undefined !== sub_pair[1]){\n\n                        if (undefined == currentFilters[sub_pair[0]]){\n                            currentFilters[sub_pair[0]] = sub_pair[1];\n                        } else {\n\n                            if (typeof currentFilters[sub_pair[0]] == 'object'){\n\n                                currentFilters[sub_pair[0]].push(sub_pair[1]);\n\n                            } else {\n\n                                var currentVal = currentFilters[sub_pair[0]];\n\n                                currentFilters[sub_pair[0]] = [];\n\n                                currentFilters[sub_pair[0]].push(currentVal);\n\n                                currentFilters[sub_pair[0]].push(sub_pair[1]);\n\n                            }\n\n                        }\n\n                    }\n                }\n            }\n\n        }\n    };\n\n    parseQueryString();\n\n    var closeOnOutClickEvent = function(){\n\n        $(document).mouseup(function (e)\n        {\n            var container = $('.top-filters-wrapper').first();\n\n            if (!container.is(e.target)\n                && container.has(e.target).length === 0 // ... nor a descendant of the container\n            )\n            {\n                container.find('.open').removeClass('open');\n            }\n        });\n\n    };\n\n    //global event handler for sorting change\n    $(document).on('click', '.sorting-dropdown .dropdown-menu a', function(e){\n        e.preventDefault();\n        e.stopPropagation();\n\n        //search for filter form sorting field\n        var sortingField = $(this).attr('data-sort-field');\n\n        //search for filter form sorting direction\n        var sortingDirection = $(this).attr('data-sort-direction');\n\n        addFieldToUrl('sort_by', sortingField, false);\n\n        buildUrl(null, 'sort_dir', sortingDirection, false);\n\n    });\n\n    $.fn.siteFilters = function(options){\n\n        closeOnOutClickEvent();\n\n        $(this).find('.filter').each(function(){\n\n            var $filter = $(this);\n            var filterTagName = $filter.attr('data-tag-name');\n            var selectedValues = null;\n            var currentFilterValue = null;\n\n            var attachEvents = function(){\n\n                $filter.find('.filter-content').on('click', function(){\n\n                    if ($filter.hasClass('remove-filters')){\n                        currentFilters = {};\n                        buildUrl();\n                        return;\n                    }\n\n                    var $dropdown = $filter.find('.filter-dropdown').first();\n\n                    if (!$dropdown.hasClass('open')){\n\n                        $('.filter-dropdown.open').removeClass('open');\n\n                        var params = {\n                            tagName: filterTagName,\n                            qs_params: currentFilters,\n                            source: options.source,\n                            source_id: options.source_id\n                        };\n\n                        if (!$dropdown.hasClass('filter-ready')){\n\n                            $dropdown.find('.scrollbar-rail').scrollbar({\n                                disableBodyScroll: true,\n                                autoUpdate: true\n                            });\n\n                            $dropdown.find('.scroll-content').empty();\n\n                            $dropdown.addClass('open loading');\n\n\n                            $.post(window.app_prefix + '/get-tags', params)\n                                .success(function(res){\n\n                                    $dropdown.removeClass('loading');\n\n                                    if (res.contentType == 'slider'){\n\n                                        $dropdown.addClass('with-slider');\n                                        // $dropdown.find('.filter-dropdown-content').empty();\n                                        $dropdown.find('.filter-dropdown-content').append($(res.content));\n\n                                        var $slider = $dropdown.find('#price-slider');\n\n                                        var slider = noUiSlider.create(document.getElementById('price-slider'),{\n                                            start: [ parseInt($slider.attr('data-min-price')) , parseInt($slider.attr('data-max-price'))],\n                                            step: 1,\n                                            range: {\n                                                'min': [ parseInt($slider.attr('data-range-min')) ],\n                                                'max': [ parseInt($slider.attr('data-range-max')) ]\n                                            },\n                                        });\n\n                                        slider.on('change', function(range){\n                                            range = range.map(function(v){\n                                                return parseInt(v);\n                                            });\n                                            buildUrl($filter, 'price', range.join('-'))\n                                        });\n\n                                        slider.on('slide', function(e){\n                                            $('#price-slider-sample').text(parseInt(e[0]) + ' - ' + parseInt(e[1]));\n                                        });\n\n                                    } else {\n                                        $dropdown.find('.scroll-content').append($(res.content));\n                                    }\n\n                                    $dropdown.addClass('filter-ready');\n\n                                })\n                                .fail(function(){\n\n                                });\n\n                        } else {\n                            $dropdown.addClass('open');\n                        }\n\n                    } else {\n                        $dropdown.removeClass('open');\n                    }\n\n                });\n\n\n\n                $filter.on('click', '.filter-tag-list li', function(){\n                    buildUrl($filter, $(this).attr('data-var-name'), $(this).attr('data-var-value'));\n                });\n\n                $filter.on('click', '.used-filters-list li', function(){\n                    removeUrlParam($(this).attr('data-filter-label'), $(this).attr('data-filter-id'));\n                });\n\n                $filter.on('keyup', '.filter-search-input', function(e){\n                    if ($(this).val() && $(this).val() != currentFilterValue){\n                        currentFilterValue = $(this).val().toLowerCase();\n\n                        $filter.find('.filter-tag-list li').each(function(){\n                            if ($(this).text().toLowerCase().indexOf(currentFilterValue) != -1){\n                                $(this).removeClass('hidden');\n                            } else {\n                                $(this).addClass('hidden');\n                            }\n                        });\n                        return;\n                    }\n                    if ($(this).val() == ''){\n                        $filter.find('.filter-tag-list li').removeClass('hidden');\n                    }\n                });\n            };\n\n            var init = function(){\n                attachEvents();\n            };\n\n            init();\n\n        });\n    };\n\n})(jQuery);\n\n$(function(){\n    $('#categoryCollapse').on('show.bs.collapse', function () {\n        $('#filterCollapse').collapse('hide');\n    });\n\n    $('#filterCollapse').on('show.bs.collapse', function () {\n        $('#categoryCollapse').collapse('hide');\n    });\n\n\n});","(function($){\n\n    $.fn.productModal = function(){\n\n        return $(this).each(function(){\n\n            var elem = $(this);\n\n            var $modal = null;\n\n            var $similar_products_html = null;\n\n            var isMobile = $('#mobile-selector').first().css('display') == 'none';\n\n            var cloneSimilarProductTemplate = function(data){\nconsole.log(data);\n                var html = $similar_products_html;\n\n                html = html.replace(/%sim_product_title%/gi, data.title);\n\n                html = html.replace(/data-sim_product_href=\"\"/gi, 'href=\"'+data.url_key+'\"');\n\n                html = html.replace(/data-sim_product_coupon_href=\"\"/gi, 'href=\"'+data.coupon_url+'\"');\n                if (data.previous_price !== null && data.previous_price && data.previous_price !== 'null'){\n                    html = html.replace(/%sim_product_previous_price%/, data.previous_price);\n                } else {\n                    html = html.replace(/%sim_product_previous_price%/, '');\n                }\n\n                html = html.replace(/%sim_product_price%/gi, data.price);\n\n                html = html.replace(/%sim_product_discount%/gi, data.discount);\n\n                html = html.replace(/%sim_product_image_url%/gi, data.thumbnail);\n\n                html = html.replace(/%sim_product_id%/gi, data.id);\n\n                html = $(html);\n\n                if (!data.coupon_url){\n                    html.find('a.coupon').remove();\n                }\n\n                return html;\n\n            };\n\n            var fetchData = function(isMobile){\n                var d = $.Deferred();\n\n                $.get(elem.attr('data-product-url'), {mob: isMobile})\n                    .success(function(res){\n                        if (res.status == 'success'){\n                            d.resolve(res);\n                        } else {\n                            d.reject(res);\n                        }\n                    })\n                    .fail(function(){\n                        d.reject(arguments);\n                    });\n\n                return d.promise();\n            };\n\n            var attachEvents = function(){\n\n                $modal.find('.close-btn').click(function(){\n\n                    if (isMobile){\n                        $modal.remove();\n                        $('body').removeClass('mobile-product-modal-open').removeClass('product-modal-open');\n                    } else {\n                        $modal.slideUp('fast', function(){\n                            $modal.remove();\n                            $('body').removeClass('mobile-product-modal-open').removeClass('product-modal-open');\n                        });\n                    }\n                });\n\n                $(window).on('resize', function(){\n                    $('#mobile-selector').first().css('display') == 'none';\n                });\n\n                $(document).on('scroll', function(){\n                    if ($('body').hasClass('mobile-product-modal-open')){\n                        if ($(document).scrollTop() > 100){\n                            if(!$modal.hasClass('header-fixed')){\n                                $modal.addClass('header-fixed');\n                            }\n                        } else {\n                            $modal.removeClass('header-fixed');\n                        }\n                    }\n                });\n\n            };\n\n            var updateTemplate = function(template, data){\n\n                for(var index in data){\n                    var re = new RegExp('%' + index + '%', 'gi');\n                    template = template.replace(re, data[index]);\n                    /*to not have a error 400 as it was for previous link formats it is moved to data elements*/\n                    var urlRe = new RegExp('data-' + index+'=\"\"' , 'gi');\n                    var sp = index.split('_');\n                    var spL = sp.length;\n                    var attr = sp[spL-1];\n                    if(attr == \"href\" || attr == \"src\"){\n                        template = template.replace(urlRe, attr+'=\"'+data[index]+'\"');\n                    }\n\n                }\n                return template;\n\n\n            };\n\n            var init = function(){\n\n                $('.product-tile-wrapper.active').removeClass('active');\n\n                elem.addClass('active');\n\n                var $parent = elem.parent();\n\n                if ($('.product-modal.open').size() > 0){\n\n                    $('.product-modal.open').slideUp('fast', function(){\n                        $(this).remove()\n                    });\n\n                    $('body').removeClass('mobile-product-modal-open').removeClass('product-modal-open');\n                }\n\n                var width = elem.width();\n                var position = elem.position();\n                var index = Math.ceil(position.left / parseInt(width));\n                var elemCount = Math.ceil($parent.width() / width) - 1;\n\n                var lastElem = elem;\n\n                for(var i = 0; i < elemCount - index; i++){\n\n                    var next = lastElem.next('.product-tile-wrapper');\n\n                    if (next.size() > 0){\n                        lastElem = next;\n                    }\n                }\n\n                var data = {\n                    product_title: elem.attr('data-product-title'),\n                    product_href: elem.attr('data-product-url'),\n                    product_price: elem.attr('data-product-price'),\n                    product_previous_price: elem.attr('data-product-pprice'),\n                    product_id: elem.attr('data-product-id'),\n                    product_image_src: elem.attr('data-image-url')\n                };\n\n                $modal_html = updateTemplate($('#product-modal').html(), data);\n\n                $modal =  $($modal_html);\n\n                if (elem.attr('data-on-wishlist') == 'true'){\n                    $modal.find('.wishlist').addClass('on-wishlist');\n                } else {\n                    $modal.find('.wishlist').removeClass('on-wishlist');\n                }\n\n                $similar_products_html = $modal.find('#similar-product-template').html();\n\n                $modal.addClass('open');\n\n                if (isMobile){\n\n                    //is mobile\n                    $('body').append($modal);\n                    $('body').addClass('mobile-product-modal-open');\n\n                    $modal.show();\n\n                    $('body').scrollTop(0);\n\n                } else {\n                    //is desktop\n\n                    $modal.insertAfter(lastElem);\n\n                    $('body').addClass('product-modal-open');\n\n                    $modal.slideDown('fast', function(){\n                        $modal.animatedScroll({\n                            duration: 'normal',\n                            easing: 'linear'\n                        });\n                    });\n                }\n\n                fetchData(isMobile).then(function(res){\n\n                    var data = res.data;\n\n                    $modal.find('img').replaceWith('<img src=\"' + data.image_url + '\" alt=\"' + data.product_title + '\"/>');\n\n                    if (undefined !== res.similar_products){\n\n                        $modal.find('.similar-products').show();\n\n                        for(var i in res.similar_products){\n\n                            var sim_obj = cloneSimilarProductTemplate(res.similar_products[i]);\n\n                            $modal.find('.similar-products .products-wrapper').append(sim_obj);\n\n                        }\n\n                    }\n\n                }, function(){\n\n                });\n\n                attachEvents();\n\n            };\n\n            init();\n\n        });\n    };\n\n})(jQuery);"]}